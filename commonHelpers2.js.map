{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst startBtn = document.querySelector('[data-start]');\nconst input = document.querySelector('#datetime-picker');\nconst days = document.querySelector('[data-days]');\nconst hours = document.querySelector('[data-hours]');\nconst minutes = document.querySelector('[data-minutes]');\nconst seconds = document.querySelector('[data-seconds]');\n\nlet timerId = null;\nlet timeDifference = 0;\nlet formatDate = null;\n\nstartBtn.setAttribute('disabled', true);\nstartBtn.addEventListener('click', onStartBtn);\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    currentDifferenceDate(selectedDates[0]);\n  },\n};\n\nflatpickr(input, options);\n\nfunction onStartBtn() {\n  timerId = setInterval(startTimer, 1000);\n}\n\nfunction startTimer() {\n  startBtn.setAttribute('disabled', true);\n  input.setAttribute('disabled', true);\n  timeDifference -= 1000;\n  if (minutes.textContent <= 0 && seconds.textContent <= 0) {\n    iziToast.success({ message: 'Time end âŒ›', position: 'topCenter' });\n    clearInterval(timerId);\n    input.removeAttribute('disabled');\n  } else {\n    formatDate = convertMs(timeDifference);\n    renderDate(formatDate);\n  }\n}\n\nfunction currentDifferenceDate(selectedDates) {\n  const currentDate = Date.now();\n  if (selectedDates < currentDate) {\n    startBtn.setAttribute('disabled', true);\n    return iziToast.error({\n      message: 'Please choose a date in the future',\n      position: 'topCenter',\n    });\n  }\n  timeDifference = selectedDates.getTime() - currentDate;\n  formatDate = convertMs(timeDifference);\n  renderDate(formatDate);\n  startBtn.removeAttribute('disabled');\n}\n\nfunction renderDate(formatDate) {\n  seconds.textContent = formatDate.seconds;\n  minutes.textContent = formatDate.minutes;\n  hours.textContent = formatDate.hours;\n  days.textContent = formatDate.days;\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = addLeadingZero(Math.floor(ms / day));\n  // Remaining hours\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  );\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["startBtn","input","days","hours","minutes","seconds","timerId","timeDifference","formatDate","onStartBtn","options","selectedDates","currentDifferenceDate","flatpickr","startTimer","iziToast","convertMs","renderDate","currentDate","addLeadingZero","value","ms"],"mappings":"0IAKA,MAAMA,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAEvD,IAAIC,EAAU,KACVC,EAAiB,EACjBC,EAAa,KAEjBR,EAAS,aAAa,WAAY,EAAI,EACtCA,EAAS,iBAAiB,QAASS,CAAU,EAE7C,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,EAAE,EAC5BC,EAAsBD,EAAc,EAAE,CACvC,CACH,EAEAE,EAAUZ,EAAOS,CAAO,EAExB,SAASD,GAAa,CACpBH,EAAU,YAAYQ,EAAY,GAAI,CACxC,CAEA,SAASA,GAAa,CACpBd,EAAS,aAAa,WAAY,EAAI,EACtCC,EAAM,aAAa,WAAY,EAAI,EACnCM,GAAkB,IACdH,EAAQ,aAAe,GAAKC,EAAQ,aAAe,GACrDU,EAAS,QAAQ,CAAE,QAAS,aAAc,SAAU,WAAW,CAAE,EACjE,cAAcT,CAAO,EACrBL,EAAM,gBAAgB,UAAU,IAEhCO,EAAaQ,EAAUT,CAAc,EACrCU,EAAWT,CAAU,EAEzB,CAEA,SAASI,EAAsBD,EAAe,CAC5C,MAAMO,EAAc,KAAK,MACzB,GAAIP,EAAgBO,EAClB,OAAAlB,EAAS,aAAa,WAAY,EAAI,EAC/Be,EAAS,MAAM,CACpB,QAAS,qCACT,SAAU,WAChB,CAAK,EAEHR,EAAiBI,EAAc,QAAS,EAAGO,EAC3CV,EAAaQ,EAAUT,CAAc,EACrCU,EAAWT,CAAU,EACrBR,EAAS,gBAAgB,UAAU,CACrC,CAEA,SAASiB,EAAWT,EAAY,CAC9BH,EAAQ,YAAcG,EAAW,QACjCJ,EAAQ,YAAcI,EAAW,QACjCL,EAAM,YAAcK,EAAW,MAC/BN,EAAK,YAAcM,EAAW,IAChC,CAEA,SAASW,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASJ,EAAUK,EAAI,CAQrB,MAAMnB,EAAOiB,EAAe,KAAK,MAAME,EAAK,KAAG,CAAC,EAE1ClB,EAAQgB,EAAe,KAAK,MAAOE,EAAK,MAAO,IAAI,CAAC,EAEpDjB,EAAUe,EAAe,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjEhB,EAAUc,EACd,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAEE,MAAO,CAAE,KAAAnB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}